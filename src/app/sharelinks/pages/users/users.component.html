<app-header (searchTextChanged)="search($event)"></app-header>
<!-- {{user_posts.userName}} -->
<div class="container-fluid">
  <div class="col-lg-12 " style="padding: 25px 25px;" *ngIf="showSuccessMessage">
    <div class="alert alert-success alert-dismissible">
      پست با موفقیت اضافه شد.

    </div>
  </div>
    <div class="row">

        <div class="col-lg-4">
           

                <div class="profile-content">
        
                    <div class="card card-blog">
                        <div class="card-image">
                            <a href="#"> <img class="img" src={{user_posts.userImages}} style="height: 300px;">
                                <div class="card-caption"> {{user_posts.userName}} </div>
                            </a>
                            <div class="ripple-cont"></div>
                        </div>
                        <div class="table mt-3">
                            <h6 class="category text-info">تعداد لایک ها: {{votes}}</h6>
                            <p class="card-description"> تعداد پست ها: {{posts_count}} </p>
                        </div>
                    </div>
                </div>

                
                
         

           
    
              </div>
              <div class="col-lg-8">
                <app-sort (newestpost)="allert($event)"></app-sort>
                <div class=" post-add-container mt-3" style="margin-right: 10%;">
            <!-- <button class="btn btn-block btn-secondary"><a>افزودن پست</a></button> -->

            <button type="button" class="btn btn-block btn-secondary" (click)="showAddPost()" >افزودن پست</button>
            <div id="addpost" *ngIf="showPostAddDiv" class="mt-3 postadd-container">
                <div class="row mb-3 border-bottom">
                  <div class="col-1" >
                    <img class="userimage rounded-circle postadd-image" style="width: 50px; height:50px;" src={{user_posts.userImages}} alt="">

                    <!-- <a href="#"> <img class="img " src={{user_posts.userImages}} style="height: 300px;"></a> -->

                  </div>
                  <div class="col-11" style="padding: 20px;">{{user_posts.userName}}</div>
                </div>
                <div class="">

                  <form [formGroup]="formGroup"  (ngSubmit)="onClickSubmit(formGroup.value)">
                    
                    <input class="form-control mb-2" required type="text"  formControlName="username" hidden/>

                    <div class="row">
                      <div class="col-lg-3" style="text-align: center; padding-left: 0;" >
                        
                        <img [src]="link_image || user_selected_image" height="85px" width="145">
                      </div>
                      <div class="col-lg-9">
                        
                        <input class="form-control mb-2" required type="text" placeholder="عنوان" formControlName="link"  onkeydown="return (event.keyCode!=13);" >
                        <div class="custom-file mb-2">

                          <input type="file" class="custom-file-input" id="exampleInputFile" formControlName="image" (change)="onFileChanged($event)">
                          <label class="custom-file-label" for="exampleInputFile" data-browse="انتخاب تصویر"></label>
                        </div>
                      </div>

                    </div>

                    <!-- <input class="filestyle mb-2"  type="file" id="formFile" formControlName="image"/> -->
                    <div class="row">

                      <div class="col">
                        <textarea class="form-control mb-2" required type="text" placeholder="لینک" formControlName="link" ></textarea>
                      </div>
                      <div class="col">
  
                        <textarea class="form-control mb-2"  type="text" placeholder="متن" formControlName="caption"></textarea>
                      </div>
                    </div>
                    <textarea class="form-control mb-2"  type="text" placeholder="توضیحات" formControlName="discription"></textarea>
                    <div class="tags btn" *ngFor="let tag of all_tags;let i=index">

                      <p *ngIf="tag">{{'#'+tag}}<i class="fa fa-close fa-fw fa-lg m-r-3" (click)="onRemoveTag(i)"></i></p>
                    </div>
                    <div class="row">
                      <div class="col-lg-11">

                        <input class="form-control mb-2"  type="text" placeholder="برچسب" #tags  formControlName="tags" onkeydown="return (event.keyCode!=13);"/>
                      </div>
                      <div class="col-lg-1">

                        <button type="button" class="btn sorts-box btn-block" (click)="addTag(tags.value)">+</button>
                      </div>

                    </div>
    
                    <div class="row mt-3">
                      <div class="col">

                        <button type="button" class="btn btn-block btn-danger" data-dismiss="modal" style="border-radius: 10px;" (click)="showAddPost()">بستن</button>
                      </div>

                      <div class="col">

                        <button  type="submit" class="btn btn-block btn-success" style="border-radius: 10px;" (click)="addedPostMessage()">افزودن</button>
                      </div>
                    </div>
                  </form>
                </div>
              

              

            </div>


              
              <!-- Modal -->
              <!-- <div #childModal class="modal fade" id="exampleModalCenter" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
                <div class="modal-dialog modal-dialog-centered" role="document" style="max-width: 600px;">
                  <div class="modal-content">
                    <div class="modal-header">
                      <h5 class="modal-title" id="exampleModalLongTitle">اضافه کردن پست جدید</h5>
                      <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                      </button>
                    </div>
                    <div class="modal-body">
                      
                    <form [formGroup]="formGroup"  (ngSubmit)="onClickSubmit(formGroup.value)">
                      <input class="form-control mb-2" required type="text"  formControlName="username" />
                      <input class="form-control mb-2" required type="text" placeholder="لینک" formControlName="link"/>
                      <input class="form-control mb-2"  type="text" placeholder="کپشن" formControlName="caption"/>
                      <input class="form-control mb-2"  type="text" placeholder="توضیحات" formControlName="discription"/>
                      <input class="form-control mb-2"  type="text" placeholder="برچسب" formControlName="tags"/>
                      <input class="form-control mb-2"  type="text" placeholder="تصویر" formControlName="image"/>

                      <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                        <button  type="submit" class="btn btn-primary" >Save changes</button>
                      </div>
                    </form>
                    </div>
                  </div>
                </div>
              </div> -->
        </div>

            <app-posts [username]="username" [typeOfEvent]="typeOfEvent" [searchValue]="searchValue" [posts]="posts" ></app-posts>
        </div>
    </div>
    <!-- <div class="col-lg-2"></div> -->

    
</div>
<router-outlet></router-outlet>


    
        
                
                    
                    
                
           

    

